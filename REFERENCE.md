# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`profile_dns_cache`](#profile_dns_cache): Configures /etc/resolv.conf and installs/configs unbound
* [`profile_dns_cache::config`](#profile_dns_cache--config): Configure unbound
* [`profile_dns_cache::firewall`](#profile_dns_cache--firewall): Open firewall when unbound is being setup as a server
* [`profile_dns_cache::install`](#profile_dns_cache--install): Installs the unbound package
* [`profile_dns_cache::resolv`](#profile_dns_cache--resolv): Configures DNS using resolv.conf
* [`profile_dns_cache::service`](#profile_dns_cache--service): Sets up the unbound service

## Classes

### <a name="profile_dns_cache"></a>`profile_dns_cache`

Configures /etc/resolv.conf and installs/configs unbound

#### Examples

##### 

```puppet
include profile_dns_cache
```

#### Parameters

The following parameters are available in the `profile_dns_cache` class:

* [`access_control`](#-profile_dns_cache--access_control)
* [`backup_dns_servers`](#-profile_dns_cache--backup_dns_servers)
* [`disable_unbound_anchor`](#-profile_dns_cache--disable_unbound_anchor)
* [`enable_harden_dnssec_stripped`](#-profile_dns_cache--enable_harden_dnssec_stripped)
* [`forward_servers`](#-profile_dns_cache--forward_servers)
* [`interfaces`](#-profile_dns_cache--interfaces)
* [`local_domain`](#-profile_dns_cache--local_domain)
* [`log_file`](#-profile_dns_cache--log_file)
* [`reverse_overrides`](#-profile_dns_cache--reverse_overrides)
* [`search_domains`](#-profile_dns_cache--search_domains)

##### <a name="-profile_dns_cache--access_control"></a>`access_control`

Data type: `Array`

Configures access-control statements in unbound config. Used to control external access
when a host is setup to be an unbound server

Format is array of hashes of the form:
[ { net => 'NET_CIDR', action => 'ACTION' } , ... ]

Where NET_CIDR is an IP/mask, ex: 192.168.1.0/24

Where ACTION is any action allowed in unbound.conf, including :
deny, refuse, deny_non_local, refuse_non_local, allow, allow_setrd or allow_snoop.
See also `man unbound`

Also controls iptables, access_controls that match any of the allow* actions get a firewall
rule added allowing the NET_CIDR given in `net`

Example hiera config
```
  ---
  profile_dns_cache::access_control:
    - net: "192.168.1.0/24"
      action: "allow"
    - net: "10.0.0.0/8"
      action: "deny"
```

##### <a name="-profile_dns_cache--backup_dns_servers"></a>`backup_dns_servers`

Data type: `Array`

Sets backup nameserver(s) in resolv.conf

Format is array of hashes of the form:
[ { server => 'IP_ADDRESS', comment => 'COMMENT' } , ... ]

Only the first two will be considered, any more will be ignored
as the max num of nameserver entries for resolv.conf is currently
3 and the first will be Unbound on the local server,
see http://man7.org/linux/man-pages/man5/resolv.conf.5.html

##### <a name="-profile_dns_cache--disable_unbound_anchor"></a>`disable_unbound_anchor`

Data type: `Boolean`

Sets the unbound sysconfig startup setting 'DISABLE_UNBOUND_ANCHOR' to yes
or no

Default for DISABLE_UNBOUND_ANCHOR in no, so you will only see this
startup setting in /etc/sysconfig/unbound if you set it to true.

Note that in almost all cases you should leave this at the default of
false. Setting it to true should generally only be necessary if your DNS
servers do not support DNSSEC.

See also enable_harden_dnssec_stripped

##### <a name="-profile_dns_cache--enable_harden_dnssec_stripped"></a>`enable_harden_dnssec_stripped`

Data type: `Boolean`

Sets the unbound.conf global setting 'harden-dnssec-stripped' to yes or no

Default for unbound.conf is yes, so you will only see this config setting
in unbound.conf if you set it to false in hiera

Note that in almost all cases you should leave this at the default of true, otherwise
you weaken DNSSEC. Would only need it if you point to DNS servers that don't offer
all/any DNSSEC protections

See also disable_unbound_anchor

##### <a name="-profile_dns_cache--forward_servers"></a>`forward_servers`

Data type: `Array`

List of servers unbound will forward to

Format is array of hashes of the form:
[ { server => 'IP_ADDRESS', comment => 'COMMENT' } , ... ]

##### <a name="-profile_dns_cache--interfaces"></a>`interfaces`

Data type: `Array`

Sets up unbound to listen for incoming connections from external hosts on
the interface(s) specified.

Format is array of one or more ip addresses

##### <a name="-profile_dns_cache--local_domain"></a>`local_domain`

Data type: `String`

(optional) sets domain in resolv.conf, e.g., 'yahoo.com', or 'none' for none

##### <a name="-profile_dns_cache--log_file"></a>`log_file`

Data type: `String`

Path to unbound log file, e.g., '/var/log/unbound.log'

##### <a name="-profile_dns_cache--reverse_overrides"></a>`reverse_overrides`

Data type: `Array`

Sets up an unbound local-zone and accompanying stub-zone to serve as an override
for reverse dns lookups

Array of arrays of the form:
[ [ 'STUB_ZONE_NAME', 'STUB-ADDR_FOR_ZONE' ] , ... ]

Each stub-zone can have one or more stub-addr(s)

##### <a name="-profile_dns_cache--search_domains"></a>`search_domains`

Data type: `Array`

Sets search domains in resolv.conf, e.g., 'google.com'

### <a name="profile_dns_cache--config"></a>`profile_dns_cache::config`

Configure unbound

#### Examples

##### 

```puppet
include profile_dns_cache::config
```

### <a name="profile_dns_cache--firewall"></a>`profile_dns_cache::firewall`

Open firewall when unbound is being setup as a server

### <a name="profile_dns_cache--install"></a>`profile_dns_cache::install`

Installs the unbound package

#### Examples

##### 

```puppet
include profile_dns_cache::install
```

### <a name="profile_dns_cache--resolv"></a>`profile_dns_cache::resolv`

Configures DNS using resolv.conf

#### Examples

##### 

```puppet
include profile_dns_cache::resolve
```

### <a name="profile_dns_cache--service"></a>`profile_dns_cache::service`

Sets up the unbound service

#### Examples

##### 

```puppet
include profile_dns_cache::service
```

